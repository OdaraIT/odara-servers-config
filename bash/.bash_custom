#!/usr/bin/env bash

#######################################################################################################################
## ENVIRONMENT VARIABLES
#######################################################################################################################
#######################################################################################################################
export VISUAL='nvim'
export EDITOR='nvim'
export GIT_EDITOR='nvim'

#######################################################################################################################
## ALIASES
#######################################################################################################################
#######################################################################################################################

#######################################################################################################################
## General
#######################################################################################################################
alias c='clear'
alias e='exit'

#######################################################################################################################
## FileSystem
#######################################################################################################################
alias ..='cd ..'
alias ...='cd ../..'
alias ....="cd ../../.."
alias .....="cd ../../../.."

alias l='ls -AGlhSr --color=always'
alias ls='ls -AGlhSr --color=always'
alias ll='ls -AGlhSr --color=always'
alias lt='ls --human-readable --size -1 -S --classify'

#######################################################################################################################
## VIM
#######################################################################################################################
alias v='nvim'
alias vi='nvim'
alias vim='nvim'
alias neovim='nvim'
alias nano='nvim'

#######################################################################################################################
## Link & Unlink
#######################################################################################################################
alias unlink-all='find . -type l -exec unlink {} \;'
alias sunlink-all='sudo find . -type l -exec unlink {} \;'

#######################################################################################################################
## Software
#######################################################################################################################
alias reload='RELOAD=1 source ~/.bashrc'
alias refresh-keys='sudo apt-key adv --refresh-keys --keyserver keyserver.ubuntu.com'

#######################################################################################################################
## PROJECT CONFIG FILE
#######################################################################################################################
#######################################################################################################################
if [ -f .projectrc ]; then
  source .projectrc
fi

last_dir="${PWD}"

function check_dir_change() {
  if [[ ${PWD} != "${last_dir}" ]]; then
    last_dir="${PWD}"

    if [[ -f .projectrc ]]; then
      source .projectrc
    fi
  fi
}

#######################################################################################################################
## SOFTWARE CONFIGURATIONS
#######################################################################################################################
#######################################################################################################################

#######################################################################################################################
## NVM
#######################################################################################################################
export NVM_DIR="${HOME}/.nvm"
[ -s "${NVM_DIR}/nvm.sh" ] && \. "${NVM_DIR}/nvm.sh"                   # This loads nvm
[ -s "${NVM_DIR}/bash_completion" ] && \. "${NVM_DIR}/bash_completion" # This loads nvm bash_completion

#######################################################################################################################
## HomeBrew
#######################################################################################################################
if command -v /home/linuxbrew/.linuxbrew/bin/brew &>/dev/null; then
  eval "$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)"
fi

#######################################################################################################################
## FZF
#######################################################################################################################
[ -f ~/.fzf.bash ] && source ~/.fzf.bash

#######################################################################################################################
## PS1
#######################################################################################################################
#######################################################################################################################
source "${HOME}/.bash_ps1"
